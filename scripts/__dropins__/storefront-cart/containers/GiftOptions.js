/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsxs as f,Fragment as B,jsx as r}from"@dropins/tools/preact-jsx-runtime.js";import{classes as xe}from"@dropins/tools/lib.js";import{Modal as Ze,Price as le,ContentGrid as Xe,ImageSwatch as Je,Button as oe,Skeleton as Qe,SkeletonRow as Ye,Field as Z,Checkbox as ie,Input as ve,TextArea as Ue,Accordion as Pe,AccordionSection as Ne,Icon as J,Card as We,ProgressSpinner as De}from"@dropins/tools/components.js";/* empty css                   */import*as Q from"@dropins/tools/preact-compat.js";import{useState as P,useEffect as se,useId as Me,useCallback as K,useMemo as ne}from"@dropins/tools/preact-hooks.js";import{useText as X}from"@dropins/tools/i18n.js";import{s as H}from"../chunks/resetCart.js";import{S as Ve}from"../chunks/ChevronUp.js";import{S as $e}from"../chunks/ChevronDown.js";import{events as er}from"@dropins/tools/event-bus.js";import{u as rr}from"../chunks/updateProductsFromCart.js";import{s as tr}from"../chunks/setGiftOptionsOnCart.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/persisted-data.js";import"../chunks/refreshCart.js";import"../fragments.js";import"../chunks/acdl.js";const D=e=>Q.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},Q.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),Q.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M6.75 12.762L10.2385 15.75L17.25 9",stroke:"currentColor"})),de=e=>Q.createElement("svg",{width:20,height:23,viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},Q.createElement("path",{d:"M10 6L10 21.5M10 6H12.25C13.4926 6 14.5 4.99264 14.5 3.75C14.5 2.50736 13.4926 1.5 12.25 1.5C11.0074 1.5 10 2.50736 10 3.75M10 6V3.75M10 6H7.75C6.50736 6 5.5 4.99264 5.5 3.75C5.5 2.50736 6.50736 1.5 7.75 1.5C8.99264 1.5 10 2.50736 10 3.75M3.25 10.75H16.75C17.9926 10.75 19 9.74264 19 8.5C19 7.25736 17.9926 6.25 16.75 6.25H3.25C2.00736 6.25 1 7.25736 1 8.5C1 9.74264 2.00736 10.75 3.25 10.75ZM4.75 21.5H15.25C16.4926 21.5 17.5 20.4926 17.5 19.25V13.25C17.5 12.0074 16.4926 11 15.25 11H4.75C3.50736 11 2.5 12.0074 2.5 13.25V19.25C2.5 20.4926 3.50736 21.5 4.75 21.5Z",stroke:"currentColor",strokeWidth:1.5})),ir=({view:e,showModal:o,productName:l,giftWrappingConfig:c,setShowModal:t,updateGiftOptions:p})=>{var O;const u=X({modalTitle:"Cart.GiftOptions.modal.title",defaultTitle:"Cart.GiftOptions.modal.defaultTitle",modalWrappingText:"Cart.GiftOptions.modal.wrappingText",modalWrappingSubText:"Cart.GiftOptions.modal.wrappingSubText",modalConfirmButton:"Cart.GiftOptions.modal.modalConfirmButton",modalCancelButton:"Cart.GiftOptions.modal.modalCancelButton"}),[n,d]=P();if(se(()=>{const i=c.find(N=>N.selected)??c[0];d(i)},[c]),!o||!c.length)return null;const m=l?`${u.modalTitle} ${l}`:u.defaultTitle;return f(Ze,{"data-testid":`gift-option-modal-${e}`,className:"cart-gift-options-view__modal",size:"medium",title:f(B,{children:[r("span",{children:m}),n&&((O=n==null?void 0:n.price)==null?void 0:O.value)>0?r(le,{amount:n.price.value,currency:n.price.currency,weight:"normal"}):null]}),centered:!0,onClose:t,children:[f("div",{className:"cart-gift-options-view__modal-content",children:[r("span",{className:"cart-gift-options-view__modal-text",children:u.modalWrappingText}),r(Xe,{emptyGridContent:r(B,{}),maxColumns:6,columnWidth:"100px",className:"cart-gift-options-view__modal-grid",children:c.map(i=>r(Je,{selected:(n==null?void 0:n.uid)===(i==null?void 0:i.uid),onValue:()=>{d(i)},name:"giftWrappingId",value:i.uid,src:i.image.url,alt:i.image.design,label:i.image.design,"data-testid":`gift-option-modal-image-${i.uid}`,className:"cart-gift-options-view__modal-grid-item"},i.uid))}),r("span",{className:"cart-gift-options-view__modal-sub-text",children:n==null?void 0:n.design})]}),r(oe,{"data-testid":"gift-option-modal-confirm-button",type:"button",onClick:()=>{p("giftWrappingId",n==null?void 0:n.uid,{isGiftWrappingSelected:!0}),t()},children:u.modalConfirmButton}),r(oe,{type:"button",variant:"secondary",onClick:t,"data-testid":"gift-option-modal-cancel-button",children:u.modalCancelButton})]})},nr=()=>r(Qe,{children:r(Ye,{variant:"row",size:"small",fullWidth:!0,lines:1,multilineGap:"small"})}),or=({className:e,view:o,item:l,giftOptions:c,disabled:t,cartData:p,giftWrappingConfig:u,setShowModal:n,onInputChange:d,areGiftOptionsVisible:m})=>{var $,S,z,q;const O=Me(),i=X({customize:`Cart.GiftOptions.${o}.customize`,giftReceiptIncludedTitle:`Cart.GiftOptions.${o}.giftReceiptIncluded.title`,giftReceiptIncludedText:`Cart.GiftOptions.${o}.giftReceiptIncluded.subtitle`,printedCardIncludedTitle:`Cart.GiftOptions.${o}.printedCardIncluded.title`,printedCardIncludedText:`Cart.GiftOptions.${o}.printedCardIncluded.subtitle`,giftOptionsWrapTitle:`Cart.GiftOptions.${o}.giftOptionsWrap.title`,giftOptionsWrapText:`Cart.GiftOptions.${o}.giftOptionsWrap.subtitle`,requiredFieldError:"Cart.GiftOptions.formText.requiredFieldError"}),N=l==null?void 0:l.productGiftWrapping,M=p==null?void 0:p.cartGiftWrapping,b=o==="product"?N:M,G=b==null?void 0:b.find(I=>I.uid===c.giftWrappingId),W=(G==null?void 0:G.design)??"",g=l==null?void 0:l.giftWrappingPrice,T=W?`${i.giftOptionsWrapText} ${W}`:"",_=+(((S=($=H.config)==null?void 0:$.printedCardPrice)==null?void 0:S.value)??0)>0?(z=H.config)==null?void 0:z.printedCardPrice:null;let v=null;g!=null&&g.value?v=g:(q=G==null?void 0:G.price)!=null&&q.value&&(v=G.price);const V=I=>I?f("span",{children:["Â (+",r(le,{amount:I.value,currency:I.currency,weight:"normal"}),")"]}):null;return f("div",{className:xe([e,[`${e}--hidden`,!m.isGiftOptionsVisible]]),children:[m.isGiftReceiptVisible?r(Z,{disabled:t,className:"cart-gift-options-view__field-gift-receipt",children:r(ie,{id:`giftReceiptIncluded-${O}`,disabled:t,name:"giftReceiptIncluded",checked:c.giftReceiptIncluded,placeholder:i.giftReceiptIncludedTitle,label:i.giftReceiptIncludedTitle,description:i.giftReceiptIncludedText,onChange:d})}):null,m.isPrintedCartVisible?r(Z,{disabled:t,className:"cart-gift-options-view__field-printed-card",children:r(ie,{id:`printedCardIncluded-${O}`,disabled:t,name:"printedCardIncluded",checked:c.printedCardIncluded,placeholder:i.printedCardIncludedTitle,label:f(B,{children:[i.printedCardIncludedTitle,V(_)]}),description:i.printedCardIncludedText,onChange:d})}):null,m.isGiftWrappingVisible?f(B,{children:[r(Z,{disabled:t,className:"cart-gift-options-view__field-gift-wrap",children:r(ie,{id:`giftOptionsWrap-${O}`,disabled:t,name:"isGiftWrappingSelected",checked:c.isGiftWrappingSelected,placeholder:i.giftOptionsWrapTitle,label:f(B,{children:[i.giftOptionsWrapTitle,V(v)]}),description:T,onChange:d})}),r(oe,{disabled:t||!u.length,type:"button","data-testid":`gift-option-customize-${o}`,variant:"tertiary",onClick:()=>n(!0),children:i.customize})]}):null]})},sr=({view:e,giftOptions:o,disabled:l,errorMessage:c,onInputChange:t,onBlur:p,isGiftMessageVisible:u})=>{const n=Me(),d=X({formTitle:`Cart.GiftOptions.${e}.formContent.formTitle`,formTo:`Cart.GiftOptions.${e}.formContent.formTo`,formFrom:`Cart.GiftOptions.${e}.formContent.formFrom`,giftMessageTitle:`Cart.GiftOptions.${e}.formContent.giftMessageTitle`,formToPlaceholder:`Cart.GiftOptions.${e}.formContent.formToPlaceholder`,formFromPlaceholder:`Cart.GiftOptions.${e}.formContent.formFromPlaceholder`,formMessagePlaceholder:`Cart.GiftOptions.${e}.formContent.formMessagePlaceholder`});return u?f(B,{children:[r("span",{children:d.formTitle}),f("div",{children:[r("span",{children:d.formTo}),r(Z,{disabled:l,error:c.recipientName,children:r(ve,{id:`recipientName-${n}`,disabled:l,type:"text",name:"recipientName",value:o.recipientName,placeholder:d.formToPlaceholder,onChange:t,onBlur:p})})]}),f("div",{children:[r("span",{children:d.formFrom}),r(Z,{disabled:l,error:c.senderName,children:r(ve,{id:`senderName-${n}`,disabled:l,type:"text",name:"senderName",value:o.senderName,placeholder:d.formFromPlaceholder,onChange:t,onBlur:p})})]}),f("div",{children:[r("span",{children:d.giftMessageTitle}),r(Z,{disabled:l,children:r(Ue,{id:`message-${n}`,errorMessage:c.message,disabled:l,name:"message",value:o.message,label:d.formMessagePlaceholder,onChange:t,onBlur:p})})]})]}):null},dr=({view:e,giftOptions:o,giftWrappingConfig:l,readOnlyFormOrderView:c})=>{const t=X({readOnlyProductTitle:"Cart.GiftOptions.product.readOnlyFormView.title",wrapping:"Cart.GiftOptions.product.readOnlyFormView.wrapping",recipient:"Cart.GiftOptions.product.readOnlyFormView.recipient",sender:"Cart.GiftOptions.product.readOnlyFormView.sender",message:"Cart.GiftOptions.product.readOnlyFormView.message",readOnlyOrderTitle:"Cart.GiftOptions.order.readOnlyFormView.title",readOnlyOrderGiftReceiptTitle:"Cart.GiftOptions.order.readOnlyFormView.giftReceipt",readOnlyOrderGiftReceiptText:"Cart.GiftOptions.order.readOnlyFormView.giftReceiptText",readOnlyOrderGiftPrintCardTitle:"Cart.GiftOptions.order.readOnlyFormView.printCard",readOnlyOrderGiftPrintCardText:"Cart.GiftOptions.order.readOnlyFormView.printCardText",readOnlyOrderGiftWrapTitle:"Cart.GiftOptions.order.readOnlyFormView.giftWrap",readOnlyOrderGiftWrapOptionsText:"Cart.GiftOptions.order.readOnlyFormView.giftWrapOptions",readOnlyOrderFormTitle:"Cart.GiftOptions.order.readOnlyFormView.formTitle",readOnlyOrderFormTo:"Cart.GiftOptions.order.readOnlyFormView.formTo",readOnlyOrderFormFrom:"Cart.GiftOptions.order.readOnlyFormView.formFrom",readOnlyOrderFormMessageTitle:"Cart.GiftOptions.order.readOnlyFormView.formMessageTitle"}),{recipientName:p,senderName:u,message:n,giftReceiptIncluded:d,printedCardIncluded:m,isGiftWrappingSelected:O}=o,i=l==null?void 0:l.find(({uid:g})=>g===(o==null?void 0:o.giftWrappingId)),N=!!p||!!u||!!n,M=i==null?void 0:i.design,b=d||m||(i==null?void 0:i.selected),G=[{id:1,title:t.wrapping,message:O?M:""},{id:2,title:t.recipient,message:p},{id:3,title:t.sender,message:u},{id:4,title:t.message,message:n}],W=G.every(({message:g})=>!g);if(e==="product"&&!W)return r(Pe,{"data-testid":"gift-options-product",iconClose:Ve,iconOpen:$e,actionIconPosition:"right",children:r(Ne,{title:t.readOnlyProductTitle,showIconLeft:!0,iconLeft:de,defaultOpen:!1,renderContentWhenClosed:!1,children:r("div",{children:G.filter(g=>g.message).map(g=>f("p",{children:[g.title," ",g.message]},g.id))})})});if(e==="order"&&(N||b)){const g=f("div",{className:"cart-gift-options-readonly__header",children:[r(J,{source:de,size:"24"}),r("span",{children:t.readOnlyOrderTitle})]}),T=f(B,{children:[d?f("div",{className:"cart-gift-options-readonly__checkboxes cart-gift-options-readonly__checkboxes--gift-receipt",children:[r(J,{source:D,size:"16"}),r("p",{children:t.readOnlyOrderGiftReceiptTitle}),r("p",{children:t.readOnlyOrderGiftReceiptText})]}):null,m?f("div",{className:"cart-gift-options-readonly__checkboxes cart-gift-options-readonly__checkboxes--print-card",children:[r(J,{source:D,size:"16"}),r("p",{children:t.readOnlyOrderGiftPrintCardTitle}),r("p",{children:t.readOnlyOrderGiftPrintCardText})]}):null,i!=null&&i.selected?f("div",{className:"cart-gift-options-readonly__checkboxes cart-gift-options-readonly__checkboxes--gift-wrap",children:[r(J,{source:D,size:"16"}),f("p",{children:[t.readOnlyOrderGiftWrapTitle," (+",r(le,{amount:i.price.value,currency:i.price.currency,weight:"normal"}),")"]}),r("p",{children:`${t.readOnlyOrderGiftWrapOptionsText} ${i==null?void 0:i.design}`})]}):null]}),_=N?f("div",{className:"cart-gift-options-readonly__form",children:[r("div",{children:t.readOnlyOrderFormTitle}),f("div",{children:[f("p",{children:[r("span",{children:t.readOnlyOrderFormTo}),r("span",{children:p})]}),f("p",{children:[r("span",{children:t.readOnlyOrderFormFrom}),r("span",{children:u})]})]}),f("div",{children:[r("p",{children:t.readOnlyOrderFormMessageTitle}),r("p",{children:n})]})]}):null;return f(We,{variant:c,children:[g,T,_]})}return null},lr=({item:e,view:o,loading:l,giftOptions:c,showModal:t,isEditable:p,errorsField:u,updateLoading:n,cartData:d,fieldsDisabled:m,isGiftOptionsApplied:O,giftWrappingConfig:i,readOnlyFormOrderView:N,isGiftMessageVisible:M,areGiftOptionsVisible:b,onBlur:G,setShowModal:W,updateGiftOptions:g,onInputChange:T,handleFormMouseLeave:_})=>{const v=X({accordionHeading:`Cart.GiftOptions.${o}.accordionHeading`}),V=K($=>r(Pe,{"data-testid":"gift-options-product",iconClose:Ve,iconOpen:$e,actionIconPosition:"right",children:r(Ne,{title:f("div",{className:"cart-gift-options-view__icon--success",children:[r("span",{children:v.accordionHeading}),O?r(J,{source:D,size:"16"}):null]}),showIconLeft:!0,iconLeft:de,defaultOpen:O||$,renderContentWhenClosed:!1,children:f(B,{children:[r(or,{className:"cart-gift-options-view__top",view:o,item:e,giftOptions:c,disabled:m,onInputChange:T,cartData:d,giftWrappingConfig:i,setShowModal:W,areGiftOptionsVisible:b}),r("form",{className:"cart-gift-options-view__footer",onMouseLeave:_,children:r(sr,{view:o,giftOptions:c,disabled:m,errorMessage:u,onInputChange:T,onBlur:G,isGiftMessageVisible:M})})]})})}),[o,e,d,v,u,c,m,i,b,O,M,G,W,T,_]);return!b.isGiftOptionsVisible&&!M?null:f("div",{id:"cart-gift-options-view",className:xe(["cart-gift-options-view",`cart-gift-options-view--${o}`,["cart-gift-options-view--loading",n]]),children:[n?r(De,{className:"cart-gift-options-view__spinner"}):null,l?r(nr,{}):f(B,{children:[p?null:r("div",{className:"cart-gift-options-view--readonly",children:r(dr,{view:o,giftOptions:c,giftWrappingConfig:i,readOnlyFormOrderView:N})}),r(ir,{view:o,productName:e&&"name"in e?e==null?void 0:e.name:"",showModal:t,giftWrappingConfig:i,setShowModal:()=>W(!1),updateGiftOptions:g}),o==="product"&&p?V(!1):null,o==="order"&&p?r(We,{variant:"secondary",children:V(!0)}):null]})]})},U={recipientName:"",senderName:"",message:""},cr={giftReceiptIncluded:!1,printedCardIncluded:!1,isGiftWrappingSelected:!1},Re=(e,o)=>{var c,t;if(!o)return!!((c=H.config)!=null&&c.allowGiftMessageOnOrder);const l=((t=H.config)==null?void 0:t.allowGiftMessageOnOrderItems)??!1;return typeof(e==null?void 0:e.giftMessageAvailable)=="boolean"?e==null?void 0:e.giftMessageAvailable:l},ar=(e,o)=>{const{allowGiftWrappingOnOrder:l,allowGiftWrappingOnOrderItems:c,allowGiftMessageOnOrder:t,allowGiftMessageOnOrderItems:p,allowGiftReceipt:u,allowPrintedCard:n}=H.config||{},d=!p&&!c&&!Re(o,!0),m=!l&&!t&&!u&&!n;return!!(e==="product"&&d||e==="order"&&m)},fr=({item:e,view:o,dataSource:l,initialLoading:c,handleItemsLoading:t,handleItemsError:p,onItemUpdate:u,onGiftOptionsChange:n})=>{var ae,fe,pe,ue,ge,me;const d=o==="product",m=X({requiredFieldError:"Cart.GiftOptions.formText.requiredFieldError"}),[O,i]=P(()=>c),[N,M]=P({isGiftReceiptVisible:!0,isPrintedCartVisible:!0,isGiftWrappingVisible:!0,isGiftOptionsVisible:!0}),[b,G]=P(!0),[W,g]=P(!1),[T,_]=P(!1),[v,V]=P(!1),[$,S]=P(!1),[z,q]=P(!1),[I,ke]=P([]),[h,Se]=P(null),[Ie,ee]=P(U),[y,ce]=P(()=>({giftWrappingId:"",...U,...cr})),re=((ae=y.recipientName)==null?void 0:ae.trim())&&((fe=y.senderName)==null?void 0:fe.trim())&&((pe=y.message)==null?void 0:pe.trim()),Y=!((ue=y.recipientName)!=null&&ue.trim())&&!((ge=y.senderName)!=null&&ge.trim())&&!((me=y.message)!=null&&me.trim()),k=K(async s=>{switch(g(o==="order"),_(!0),o){case"product":{"uid"in e&&(t==null||t(e.uid,!0),p==null||p(e.uid));const{recipientName:a,senderName:F,message:C,giftWrappingId:x,isGiftWrappingSelected:w}=s,E={gift_message:{to:a??"",from:F??"",message:C??""},gift_wrapping_id:w?x:null};"uid"in e&&"quantity"in e&&await rr([{uid:e.uid,quantity:e.quantity,giftOptions:E}]).then(()=>{u==null||u({item:e})}).finally(()=>{t==null||t(e.uid,!1),_(!1),V(!1),g(!1)}).catch(R=>{console.warn(R)})}break;case"order":await tr(s).finally(()=>{_(!1),V(!1),g(!1)});break;default:console.error('Incorrect "view" prop value provided for GiftOptions container (storefront-cart)');break}},[p,t,e,u,o]),te=K((s,a,F={})=>{ce(C=>{const x=A=>A in C,w=A=>x(A)?C[A]:void 0;if(!(w(s)!==a||Object.keys(F).some(A=>w(A)!==F[A])))return n==null||n(C),C;const R={...C,[s]:a,...F};return!R.recipientName&&!R.senderName&&!R.message&&S(!0),(typeof a=="boolean"||["giftWrappingId","giftReceiptIncluded","printedCardIncluded"].includes(s))&&(typeof n=="function"?n(R):k(R)),V(!0),n==null||n(R),R})},[k,n]),Ae=K(async()=>{T||typeof n!="function"&&(Y&&$&&(ee(U),S(!1),await k(y)),v&&re&&(S(!0),await k(y)))},[k,y,v,Y,$,T,n]),He=K(async s=>{if(T||typeof n=="function")return;const{name:a,value:F}=s.target;ee(C=>({...C,[a]:F.trim()?"":m.requiredFieldError})),Y&&$&&(ee(U),S(!1),await k(y)),v&&re&&await k(y)},[T,Y,$,v,re,m,k,y,n]),Be=K(s=>{const a=s.target,F=a.name,C=a.type==="checkbox"?a.checked:a.value;te(F,C)},[te]);se(()=>{if(d)return;const s=er.on(l==="cart"?"cart/data":"order/data",a=>{var x,w;Se(a);const F=(x=a==null?void 0:a.items)==null?void 0:x.every(({giftWrappingAvailable:E})=>E),C=(w=a==null?void 0:a.cartGiftWrapping)==null?void 0:w.some(E=>E.selected);!F&&C&&k({...y,giftWrappingId:"",isGiftWrappingSelected:!1})},{eager:!0});return()=>{s==null||s.off()}},[k,l,y,d]);const L=ne(()=>{var Ge,ye,Te,Fe,we,be;if(!h&&!e)return null;const s=d?(Ge=e==null?void 0:e.productGiftWrapping)==null?void 0:Ge.map(j=>{var _e;return{...j,price:e!=null&&e.giftWrappingPrice&&((_e=e==null?void 0:e.giftWrappingPrice)==null?void 0:_e.value)>0?e.giftWrappingPrice:j.price}}):(h==null?void 0:h.cartGiftWrapping)||[],a=s==null?void 0:s.find(j=>j.selected),F=(a==null?void 0:a.uid)??((ye=s==null?void 0:s[0])==null?void 0:ye.uid),C=!!a,x=d?e.giftMessage:h==null?void 0:h.giftMessage,w=h==null?void 0:h.printedCardIncluded,E=h==null?void 0:h.giftReceiptIncluded,R=Re(e,d),A=(Te=H.config)==null?void 0:Te.allowGiftWrappingOnOrder,qe=(Fe=H.config)==null?void 0:Fe.allowGiftReceipt,Le=(we=H.config)==null?void 0:we.allowPrintedCard,je=(be=h==null?void 0:h.items)==null?void 0:be.every(j=>j.giftWrappingAvailable),Ke=e==null?void 0:e.giftWrappingAvailable,Oe=d?!1:!!qe,he=d?!1:!!Le,Ce=d?!!Ke&&!!s.length:!!A&&!!s.length&&!!je;return M({isGiftReceiptVisible:Oe,isPrintedCartVisible:he,isGiftWrappingVisible:Ce,isGiftOptionsVisible:!(!Oe&&!he&&!Ce)}),G(R),{...e&&"uid"in e?{itemId:e.uid}:{},...d?{}:{printedCardIncluded:w,giftReceiptIncluded:E},...x,giftWrappingId:F,isGiftWrappingSelected:C,giftWrappingOptions:s}},[h,e,d]);se(()=>{if(!L)return;const{giftWrappingOptions:s}=L;ce(a=>{const F=x=>x in a,C=Object.keys(L).reduce((x,w)=>F(w)&&a[w]!==L[w]?{...x,[w]:L[w]}:x,{});return Object.keys(C).length>0?{...a,...C}:a}),s!=null&&s.length&&ke(s),i(!1)},[L]);const Ee=ne(()=>Object.entries(y).filter(([s])=>s!=="itemId"&&s!=="giftWrappingId").some(([,s])=>!!s),[y]),ze=ne(()=>{var s;return!O&&!!((s=H)!=null&&s.config)&&ar(o,e)},[e,O,o]);return{loading:O,giftOptions:y,showModal:z,errorsField:Ie,updateLoading:W,cartData:h,fieldsDisabled:T,isGiftOptionsApplied:Ee,giftWrappingConfig:I,setFieldsDisabled:_,handleFormMouseLeave:Ae,onInputChange:Be,updateGiftOptions:te,setShowModal:q,handleBlur:He,isGiftMessageVisible:b,areGiftOptionsVisible:N,isGiftOptionsHidden:ze}},Wr=({item:e,view:o="order",readOnlyFormOrderView:l="primary",dataSource:c="cart",isEditable:t=!0,initialLoading:p=!0,handleItemsLoading:u,handleItemsError:n,onItemUpdate:d,onGiftOptionsChange:m})=>{const{isGiftMessageVisible:O,areGiftOptionsVisible:i,loading:N,giftOptions:M,showModal:b,errorsField:G,updateLoading:W,cartData:g,isGiftOptionsApplied:T,fieldsDisabled:_,giftWrappingConfig:v,handleFormMouseLeave:V,updateGiftOptions:$,setShowModal:S,onInputChange:z,handleBlur:q,isGiftOptionsHidden:I}=fr({item:e,view:o,dataSource:c,initialLoading:p,handleItemsLoading:u,handleItemsError:n,onItemUpdate:d,onGiftOptionsChange:m});return I?null:r(lr,{item:e,view:o,loading:N,onBlur:q,giftOptions:M,showModal:b,isEditable:t,errorsField:G,setShowModal:S,updateLoading:W,updateGiftOptions:$,cartData:g,isGiftOptionsApplied:T,fieldsDisabled:_,giftWrappingConfig:v,handleFormMouseLeave:V,readOnlyFormOrderView:l,onInputChange:z,isGiftMessageVisible:O,areGiftOptionsVisible:i})};export{Wr as GiftOptions,Wr as default};
